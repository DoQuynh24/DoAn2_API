<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SULLY & BAG | Vi·ªát Nam</title>
    <link rel="stylesheet" href="./style_admin.css">
    <link rel="icon" href="images/logo.png">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="angular/global.js"></script>
    <script src="angular/script.js"></script>
    <script src="angular/admin.js"></script>
    <script src="angular/admin_user.js"></script>
    <script src="angular/admin_bills.js"></script>
    <script src="angular/admin_product.js"></script>
    <script src="angular/admin_home.js"> </script>
    <script src="angular/admin_orders.js"></script>
    <script src="angular/user_login.js"></script>
   
    <script src="js/admin.js" defer></script>
    
     <!-- Bootstrap 5.3.3 -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

     <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


</head>
<body ng-app="AppAdmin">
    <div id="main">
        <div id="header">
            <div id="name">
                <p class="name">Sully & Bag</p>
            </div>
            <div id="search">
                <img class="menu" src="images/menu.png"/>
                <div id="text">
                    <span>Home</span>
                    <span style="margin-left: 40px;">About</span>
                    <span style="margin-left: 40px;">Project</span>
                    <span style="margin-left: 40px;">Support</span>
                </div>
            </div>
            <div id="avt">
                <img style="width:23px; height:23px;margin-top: 20px; margin-right: 20px;" src="images/letter.png"/>
                <img style="width:25px; height:25px;margin-top: 20px; margin-right: 20px;" src="images/ring.png"/>
                <img style="width:25px; height:25px;margin-top: 20px; margin-right: 20px;" src="images/chat.png"/>
                <img class="avt" src="images/avt.jpg"/>
                <p style="text-align: center; font-size: 17px; margin-top: 20px; margin-left: 10px;">ƒê·ªó Qu·ª≥nh ‚ñº</p>
                <img style="width:25px; height:25px; margin-top: 20px; margin-left: 20px;" src="images/setting.png"/>
            </div>
        </div>
        <div id="content">
            <div id="content-left" ng-controller="tab">
                <button class="button" data-tab="home"><img class="icon" src="images/home.png"/>Trang ch·ªß</button>
                <button class="button" data-tab="products" ><img class="icon" src="images/tui.png"/>S·∫£n ph·∫©m</button>
                <button class="button" data-tab="bills"><img class="icon" src="images/bill.png"/>H√≥a ƒë∆°n</button>
                <button class="button" data-tab="orders"><img class="icon" src="images/staff.png"/>Nh·∫≠p h√†ng</button>
                <button class="button" data-tab="notifications"><img class="icon" src="images/thongbao.png"/>Th√¥ng b√°o</button>
                <button class="button" data-tab="store"><img class="icon" src="images/shopp.png"/>C·ª≠a h√†ng</button>
                <button class="button" data-tab="user" ><img class="icon" src="images/shopp.png"/>Ng∆∞·ªùi d√πng</button>
            </div>
        
            <div id="content-right">
                <!-- N·ªôi dung Tab Trang Ch·ªß -->
                <div id="home" class="tab-content active" ng-controller="homeCtrl" >
                    <div class="stats">
                        <div class="stat-item">
                            <h3>T·ªïng s·∫£n ph·∫©m</h3>
                            <p>{{ listProduct.length }}</p>
                        </div>
                        <div class="stat-item">
                            <h3>Kh√°ch h√†ng</h3>
                            <p>{{ listUser.length }}</p>
                        </div>
                        <div class="stat-item">
                            <h3> T·ªïng H√≥a ƒë∆°n</h3>
                            <p>{{ totalHoaDon  }}</p>
                        </div>
                        <div class="stat-item">
                            <h3> ƒêang x·ª≠ l√Ω</h3>
                            <p>{{ totalDangXuLy }}</p>
                        </div>
                        <div class="stat-item">
                            <h3> Ch·ªù giao h√†ng</h3>
                            <p>{{ totalChoGiaoHang}}</p>
                        </div>
                    </div>
                     <!-- Th√™m bi·ªÉu ƒë·ªì -->
                        <div style="width: 90%; margin: 35px auto;">
                            <canvas id="hoaDonChart"></canvas>
                        </div>
                </div>
            
                <!-- N·ªôi dung Tab S·∫£n ph·∫©m -->
                <div id="products" class="tab-content" ng-controller="productCtrl">
                    <div class="search-container-sanpham">
                        <div class="search-icon">
                            <img src="images/search.png" alt="Search" />
                        </div>
                        <input style="background-color: #CCC; font-size: 13px;" type="text" ng-model="searchQuery" placeholder="B·∫°n c√≥ th·ªÉ t√¨m ki·∫øm theo ID ƒë∆°n h√†ng ho·∫∑c T√™n s·∫£n ph·∫©m" 
                            ng-change="search('hoadons', searchQuery)" class="form-control" 
                        />
                    </div>    
                    <div >
                        <div class="product-header d-flex justify-content-between align-items-center mb-3">
                            <div class="filters d-flex gap-3">
                                <div>
                                    <select id="filterCategory" class="form-select"  ng-model="selectedCategory" ng-change="filterProducts()"> 
                                        <option value=""  >L·ªçc s·∫£n ph·∫©m theo danh m·ª•c</option>
                                        <option ng-repeat="category in categories" value="{{ category.maDanhMuc }}">
                                            {{ category.tenDanhMuc }}
                                        </option>
                                    </select> 
                                </div>
                                <button class="icon-pencil" ng-click="editCategory(category)">‚úèÔ∏è</button> 
                                <button class="btn-add" data-bs-toggle="modal" data-bs-target="#CategoryModal"> ‚ûïÔ∏é </button>
                                <!-- Modal Th√™m Danh M·ª•c -->
                                <div class="modal fade" id="CategoryModal" tabindex="-1" aria-labelledby="CategoryModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="CategoryModalLabel">
                                                    {{ isEditCategoryMode ? 'C·∫≠p nh·∫≠t danh m·ª•c' : 'Th√™m Danh M·ª•c' }}
                                                </h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <form ng-submit="saveCategory()" enctype="multipart/form-data">
                                                    <div class="mb-3">
                                                        <label for="categoryID" class="form-label">M√£ danh m·ª•c</label>
                                                        <input type="text" class="form-control" id="categoryID" ng-model="newCategory.maDanhMuc" required>
                                                        <label for="categoryName" class="form-label">T√™n danh m·ª•c</label>
                                                        <input type="text" class="form-control" id="categoryName" ng-model="newCategory.tenDanhMuc" required>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                                                <button ng-click="saveCategory()" type="button" class="btn btn-primary">
                                                    {{ isEditMode ? 'C·∫≠p nh·∫≠t' : 'Th√™m m·ªõi' }}
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                     
                                <!-- L·ªçc theo m√†u s·∫Øc -->
                                <div>
                                    <select id="filterColor" class="form-select" ng-model="selectedColor" ng-change="filterProducts()">
                                        <option value="">L·ªçc s·∫£n ph·∫©m theo m√†u s·∫Øc</option>
                                        <option ng-repeat="color in colors" value="{{color.maMau}}">
                                            {{ color.tenMau }}
                                        </option>
                                    </select>
                                </div>                           
                                <button class="btn-add" data-bs-toggle="modal" data-bs-target="#addColorModal"> ‚ûïÔ∏é </button>
    
                                <!-- Modal Th√™m M√†u S·∫Øc -->
                                <div class="modal fade" id="addColorModal" tabindex="-1" aria-labelledby="addColorModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="addColorModalLabel">Th√™m M√†u S·∫Øc M·ªõi</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <form>
                                                    <div class="mb-3">
                                                        <label for="colorName" class="form-label">T√™n M√†u</label>
                                                        <input type="text" class="form-control" id="colorName" ng-model="newColor.tenMau" required>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                                                <button type="button" class="btn btn-primary" ng-click="addColor()">Th√™m</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
    
                                <!-- L·ªçc theo size -->
                                <div>
                                    <select id="filterSize" class="form-select" ng-model="selectedSize" ng-change="filterProducts()">
                                        <option value="">L·ªçc s·∫£n ph·∫©m theo size</option>
                                        <option ng-repeat="size in sizes" value="{{size.maSize}}">
                                            {{ size.maSize }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <button type="button" style="float:right; border:none;background-color: #FFF;" data-bs-toggle="modal" data-bs-target="#productModal" ng-click="clearFormProduct()"> <image class="add" src="images/addProduct.png" /></button>   
                        </div>
                      
                    </div>
    
                    <table class="product-table" >
                        <thead>
                            <tr>
                                <th>ID </th>
                                <th>Lo·∫°i T√∫i</th>
                                <th>T√™n S·∫£n Ph·∫©m</th>
                                <th>Gi√° B√°n</th>
                                <th>M√†u s·∫Øc</th>
                                <th>Size</th>
                                <th>T·ªìn kho</th>
                                <th>H√¨nh ·∫£nh</th>
                                <th>H√†nh ƒë·ªông</th>
    
                            </tr>
                        </thead>
                        <tbody >
                            <tr ng-repeat="p in paginatedProducts()">
                                <td>{{p.maSp}}</td>
                                <td>{{p.maDanhMuc}}</td>
                                <td>{{p.tenSp}}</td>
                                <td>{{p.giaBan  | number: 0}}</td>
                                <td>{{p.tenMau}}</td>
                                <td>{{p.maSize}}</td>
                                <td>{{p.tonKho}}</td>
                                <td>
                                    <img id="anh-tui-sach-{{p.maSp}}" ng-src="{{'https://localhost:44366/api/TuiXach/get-img/' + p.hinhAnh}}" alt="·∫¢nh s·∫£n ph·∫©m" style="width: 70px; height:60px">
                                </td>
                                                  
                                <td>
                                    <button class="edit-btn" ng-click="editProduct(p)" data-bs-toggle="modal" data-bs-target="#productModal">S·ª≠a</button>
                                    <button class="delete-btn" ng-click="deleteProduct(p.maSanPham)">X√≥a</button>
                                </td> 
                            </tr>
                        </tbody>
                    </table>
                     <!-- Ph√¢n trang -->
                     <div class="pagination">
                        <button ng-repeat="page in [].constructor(totalPages()) track by $index"
                                ng-class="{'active': currentPage === $index + 1}"
                                ng-click="setPage($index + 1)">
                            {{ $index + 1 }}
                        </button>
                    </div>
                    <!--Modal Th·∫øm/S·ª≠a S·∫£n ph·∫£m-->
                    <div class="modal fade modal-lg" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h1 class="modal-title fs-5" id="productModalLabel">
                                {{ isEditMode ? 'C·∫≠p nh·∫≠t S·∫£n Ph·∫©m' : 'Th√™m S·∫£n Ph·∫©m' }}
                            </h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form ng-submit="saveProduct()" enctype="multipart/form-data">
                                    <div class="row mb-3">
                                        <!-- M√£ Danh M·ª•c -->
                                        <div class="col-md-6">
                                            <label for="maDanhMuc" class="form-label">M√£ Danh M·ª•c:</label>
                                            <input type="text" id="maDanhMuc" ng-model="newProduct.maDanhMuc" class="form-control" required>
                                        </div>
                                        <!-- M√£ S·∫£n Ph·∫©m -->
                                        <div class="col-md-6">
                                            <label for="maSp" class="form-label">M√£ S·∫£n Ph·∫©m:</label>
                                            <input type="text" id="maSp" ng-model="newProduct.maSp" class="form-control" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <!-- T√™n S·∫£n Ph·∫©m -->
                                        <div class="col-md-6">
                                            <label for="tenSp" class="form-label">T√™n S·∫£n Ph·∫©m:</label>
                                            <input type="text" id="tenSp" ng-model="newProduct.tenSp" class="form-control" required>
                                        </div>
                                        <!-- Gi√° B√°n -->
                                        <div class="col-md-6">
                                            <label for="giaBan" class="form-label">Gi√° B√°n:</label>
                                            <input type="number" id="giaBan" ng-model="newProduct.giaBan" class="form-control" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <!-- Khuy·∫øn M√£i -->
                                        <div class="col-md-6">
                                            <label for="khuyenMai" class="form-label">Khuy·∫øn M√£i:</label>
                                            <input type="number" id="khuyenMai" ng-model="newProduct.khuyenMai" class="form-control">
                                        </div>
                                        <!-- T·ªìn Kho -->
                                        <div class="col-md-6">
                                            <label for="tonKho" class="form-label">T·ªìn Kho:</label>
                                            <input type="number" id="tonKho" ng-model="newProduct.tonKho" class="form-control" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <!-- M√†u S·∫Øc -->
                                        <div class="col-md-6">
                                            <label for="mauSac" class="form-label">M√†u S·∫Øc:</label>
                                            <select class="form-control" id="color" ng-model="newProduct.tenMau" required>
                                                <option ng-repeat="color in colors" value="{{color.tenMau}}">{{color.tenMau}}</option>
                                            </select>
                                        </div>
                                        <!-- Size -->
                                        <div class="col-md-6">
                                            <label for="size" class="form-label">Ch·ªçn Size:</label>
                                            <select class="form-control" id="size" ng-model="newProduct.maSize" required>
                                                <option ng-repeat="size in sizes" value="{{size.maSize}}">{{size.maSize}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <!-- M√¥ T·∫£ -->
                                        <div class="col-12">
                                            <label for="moTa" class="form-label">M√¥ T·∫£:</label>
                                            <textarea id="moTa" ng-model="newProduct.moTa" class="form-control"></textarea>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <!-- H√¨nh ·∫¢nh -->
                                        <div class="col-12">
                                            <label for="hinhAnh" class="form-label">H√¨nh ·∫¢nh:</label>
                                            <img ng-src="{{newProduct.imageUrl || getImageUrl(newProduct.hinhAnh)}}" alt="·∫¢nh s·∫£n ph·∫©m"style="width:50px; height:50px" />
                                            <input type="file" ngf-select="onFileChange($file)" />
                                        </div>
                                    </div>   
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                                <button ng-click="saveProduct()" type="button" class="btn btn-primary">
                                    {{ isEditProductMode ? 'C·∫≠p nh·∫≠t' : 'Th√™m m·ªõi' }}
                                </button>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            
                <!-- N·ªôi dung Tab H√≥a ƒë∆°n -->
                <div id="bills" class="tab-content" ng-controller="billsCtrl">
                    <div class="header-hoadon">
                        <div id="menu">
                            <div class="menu-item" ng-class="{'active': selectedStatus === 'T·∫•t c·∫£'}" ng-click="LoadHoaDon('T·∫•t c·∫£')">T·∫•t c·∫£</div>
                            <div class="menu-item" ng-class="{'active': selectedStatus === 'ƒêang x·ª≠ l√Ω'}" ng-click="LoadHoaDon('ƒêang x·ª≠ l√Ω')">ƒêang x·ª≠ l√Ω</div>
                            <div class="menu-item" ng-class="{'active': selectedStatus === 'ƒêang l·∫•y h√†ng'}" ng-click="LoadHoaDon('ƒêang l·∫•y h√†ng')">ƒêang l·∫•y h√†ng</div>
                            <div class="menu-item" ng-class="{'active': selectedStatus === 'Ch·ªù giao h√†ng'}" ng-click="LoadHoaDon('Ch·ªù giao h√†ng')">Ch·ªù giao h√†ng</div>
                            <div class="menu-item" ng-class="{'active': selectedStatus === 'Ho√†n th√†nh'}" ng-click="LoadHoaDon('Ho√†n th√†nh')">Ho√†n th√†nh</div>
                            <div class="menu-item" ng-class="{'active': selectedStatus === 'ƒê√£ h·ªßy'}" ng-click="LoadHoaDon('ƒê√£ h·ªßy')">ƒê√£ h·ªßy</div>
                        </div>
                        
                        <!-- Thanh t√¨m ki·∫øm -->
                        
                        <div class="search-container-hoadon">
                            <div class="search-icon">
                                <img src="images/search.png" alt="Search" />
                            </div>
                            <input style="background-color: #CCC; font-size: 13px;"   type="text" ng-model="searchQuery" placeholder="B·∫°n c√≥ th·ªÉ t√¨m ki·∫øm theo ID ƒë∆°n h√†ng ho·∫∑c T√™n s·∫£n ph·∫©m" 
                                ng-change="search('hoadons', searchQuery)" class="form-control" 
                            />
                        </div>
                    </div> 
                    <div>
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>MaHD</th>
                                    <th>PerID</th>
                                    <th>Ng√†y ƒë·∫∑t h√†ng</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Ng√†y nh·∫≠n h√†ng</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="h in paginatedHoaDon()">
                                    <td>{{h.maHD}}</td>
                                    <td>{{h.perID}}</td>
                                    <td>{{h.ngayDatHang | date:'dd/MM/yyyy'}}</td>
                                    <td ng-class="{
                                        'trang-thai-dang-xu-ly': h.trangThai === 'ƒêang x·ª≠ l√Ω',
                                        'trang-thai-dang-lay-hang': h.trangThai === 'ƒêang l·∫•y h√†ng',
                                        'trang-thai-cho-giao-hang': h.trangThai === 'Ch·ªù giao h√†ng',
                                        'trang-thai-hoan-thanh': h.trangThai === 'Ho√†n th√†nh',
                                        'trang-thai-da-huy': h.trangThai === 'ƒê√£ h·ªßy'
                                    }">
                                        {{ h.trangThai }}
                                    </td>
                                    
                                    <td ng-if="h.trangThai === 'Ho√†n th√†nh'">{{ h.ngayNhanHang | date:'dd/MM/yyyy' }}</td>
                                    <td ng-if="h.trangThai !== 'Ho√†n th√†nh'">--</td>

                                    <td>
                                        <button class="see-btn-hoadon" ng-click="LoadlistCTHD(h)">
                                            <img src="images/see.png" alt="" style="width: 23px; height: 23px;"> 
                                        </button>
                                        <button class="delete-btn-hoadon" ng-click="deleteHoaDon(h.maHD)">
                                            <img src="images/delete.png" alt="X√≥a" style="width: 23px; height: 23px;"> 
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div>
                            <p>T·ªïng ti·ªÅn c√°c h√≥a ƒë∆°n ho√†n th√†nh: {{ totalCompletedBills | number }} ‚Ç´</p>
                        </div>
                         <!-- Ph√¢n trang -->
                        <div class="pagination">
                            <button ng-repeat="page in [].constructor(totalPages()) track by $index"
                                    ng-class="{'active': currentPage === $index + 1}"
                                    ng-click="setPage($index + 1)">
                                {{ $index + 1 }}
                            </button>
                        </div>
                        <!-- <label style="text-align: center; margin-top: 10px;">{{ filteredHoaDon.length }} H√≥a ƒê∆°n</label>
                        <p ng-if="listHoaDon.length === 0">Kh√¥ng c√≥ h√≥a ƒë∆°n n√†o.</p> -->
                    </div>
                    <!-- Modal hi·ªÉn th·ªã h√≥a ƒë∆°n -->
                    <div class="modal fade" id="billModal" tabindex="-1" aria-labelledby="billModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="billModalLabel">Th√¥ng tin H√≥a ƒê∆°n</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="row mb-2">
                                        <div class="col-md-5">
                                            <p><b>M√£ H√≥a ƒê∆°n:</b> {{selectedBill.maHD }}</p>
                                        </div>
                                        <div class="col-md-6">
                                            <p><b>Ng√†y ƒë·∫∑t h√†ng:</b> {{ selectedBill.ngayDatHang }}</p>
                                        </div>
                                    </div>
                                    <div class="row mb-2">
                                        <div class="col-md-5">
                                            <p><b>Kh√°ch h√†ng:</b> {{ selectedBill.perID }}
                                        </div>
                                        <div class="col-md-7">
                                            <p><b>H·ªç v√† T√™n:</b> {{ selectedBill.hoTen }}</p>
                                        </div>
                                    </div>
                                    <div class="row mb-2">
                                        <div class="col-md-5">
                                            <p><b>S·ªë ƒëi·ªán tho·∫°i:</b> {{ selectedBill.sdt }}</p>
                                        </div>
                                        <div class="col-md-7">
                                            <p><b>ƒê·ªãa Ch·ªâ:</b> {{ selectedBill.diaChi }}</p>
                                        </div>
                                       
                                    </div>
                                    <div class="row mb-2">
                                        <div class="col-md-5" ng-if="selectedBill.trangThai === 'Ho√†n th√†nh'">
                                            <p><b>Ng√†y nh·∫≠n h√†ng:</b> {{ selectedBill.ngayNhanHang | date:'dd/MM/yyyy' }}</p>
                                        </div>
                                        <div class="col-md-5" ng-if="selectedBill.trangThai !== 'Ho√†n th√†nh'">
                                            <p><b>Ng√†y nh·∫≠n h√†ng:</b>--</p>
                                        </div>
                                        <div class="col-md-7">
                                            <b>Tr·∫°ng th√°i ƒë∆°n h√†ng:</b>
                                            <select ng-model="selectedBill.trangThai "ng-disabled="selectedBill.trangThai === 'Ho√†n th√†nh'" >
                                                <option value="ƒêang x·ª≠ l√Ω">ƒêang x·ª≠ l√Ω</option>
                                                <option value="ƒêang l·∫•y h√†ng">ƒêang l·∫•y h√†ng</option>
                                                <option value="Ch·ªù giao h√†ng">Ch·ªù giao h√†ng</option>
                                                <option value="Ho√†n th√†nh">Ho√†n th√†nh</option>
                                                <option value="ƒê√£ h·ªßy">ƒê√£ h·ªßy</option>
                                            </select>
                                          
                                        </div>
                                    </div>
                                
                                    <!-- B·∫£ng chi ti·∫øt h√≥a ƒë∆°n -->
                                    
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>T√™n s·∫£n ph·∫©m</th>
                                                <th>M√†u s·∫Øc</th>
                                                <th>Size</th>
                                                <th>S·ªë l∆∞·ª£ng</th>
                                                <th>Gi√° b√°n</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="ct in listChiTiet">
                                                <td>{{ ct.tenSp }}</td>
                                                <td>{{ ct.tenMau }}</td>
                                                <td>{{ ct.maSize }}</td>
                                                <td>{{ ct.soLuong }}</td>
                                                <td>{{ ct.giaBan | number: 0}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <p style="margin-top: 15px;"  ng-repeat="ct in listChiTiet">Ghi ch√∫: {{ ct.ghiChu }}</p>
                                    <div style="float:right;">
                                        <lable>T·ªïng ti·ªÅn h√†ng: ‚Ç´{{ tongTienHang | number }}</lable>
                                        <p>Ph√≠ v·∫≠n chuy·ªÉn: ‚Ç´{{ phiVanChuyen | number }}</p>
                                        <p style="color:brown; font-weight: bold;">Th√†nh ti·ªÅn: ‚Ç´{{ thanhTien | number }}</p>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button ng-click="updateBill()" type="button" class="btn btn-primary">
                                        C·∫≠p nh·∫≠t
                                    </button>
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                                </div>
                            </div>
                        </div>
                    </div>
               
                </div>    
                <!-- N·ªôi dung Tab ƒê∆°n h√†ng nh·∫≠p -->
                <div id="orders" class="tab-content" ng-controller="ordersCtrl">
                    <div class="header">
                        <h3 style="display: inline-block;">ƒê∆°n H√†ng Nh·∫≠p</h3>
                        <!-- Thanh t√¨m ki·∫øm -->
                     
                        <div class="search-container-hoadon">
                            <div class="search-icon">
                                <img src="images/search.png" alt="Search" />
                            </div>
                            <input style="background-color: #CCC; font-size: 13px;" type="text" ng-model="searchQuery" placeholder="B·∫°n c√≥ th·ªÉ t√¨m ki·∫øm theo ID ƒë∆°n h√†ng nh·∫≠p ho·∫∑c T√™n s·∫£n ph·∫©m" 
                                ng-change="search('hoadons', searchQuery)" class="form-control" 
                            />
                        </div>    
                        <button type="button" style="float:right; border:none;background-color: #FFF" data-bs-toggle="modal" data-bs-target="#orderModal" ng-click="clearForm()">
                           <image class="add" src="images/addBills.png"/>
                        </button>
                    </div>  
        
                    <div>
                        <table border="1">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>T√™n Nh√† Cung C·∫•p</th>
                                    <th>Ng√†y Nh·∫≠p</th>
                                    <th>H√†nh ƒë·ªông</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="order in listOrder">
                                    <td>{{order.maDHN}}</td>
                                    <td>{{order.tenNCC}}</td>
                                    <td>{{order.ngayNhap  | date:'dd/MM/yyyy'}}</td>
                                    <td>
                                        <button class="see-btn" ng-click="LoadlistCTDHN(order)" data-bs-toggle="modal" data-bs-target="#orderModal">
                                            <img src="images/see.png" alt="Xem" style="width: 23px; height: 23px;"> 
                                        </button>
                                        <button class="delete-btn" ng-click="deleteOrder(order.maNCC)">
                                            <img src="images/delete.png" alt="X√≥a" style="width: 23px; height: 23px;"> 
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
            
                        <lable style=" margin-top: 10px;"> {{ listOrder.length }}<a> ƒê∆°n h√†ng nh·∫≠p</a> </lable>
                        <!-- Thanh ph√¢n trang -->
                        <nav aria-label="Page navigation example" id="pagination">
                            <ul class="pagination">
                              <li class="page-item">
                                <a class="page-link" href="#" aria-label="Previous">
                                  <span aria-hidden="true">&laquo;</span>
                                </a>
                              </li>
                              <li class="page-item"><a class="page-link" href="#">1</a></li>
                              <li class="page-item"><a class="page-link" href="#">2</a></li>
                              <li class="page-item"><a class="page-link" href="#">3</a></li>
                              <li class="page-item">
                                <a class="page-link" href="#" aria-label="Next">
                                  <span aria-hidden="true">&raquo;</span>
                                  <span class="sr-only">Next</span>
                                </a>
                              </li>
                            </ul>
                        </nav>          
                    </div>
                
                <!-- Modal hi·ªÉn th·ªã ƒë∆°n h√†ng nnh·∫≠p -->
                <div class="modal fade" id="orderModal" tabindex="-1" aria-labelledby="orderModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="orderModalLabel" >
                                    {{ isEditMode ? 'Th√¥ng tin phi·∫øu h√†ng nh·∫≠p' : 'T·∫°o phi·∫øu nh·∫≠p h√†ng' }}
                                </h5>
                            
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form ng-submit="saveOrder()" enctype="multipart/form-data">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom:0px;">
                                    <p><b>M√£ ƒê∆°n H√†ng Nh·∫≠p: </b> {{selectedOrder.maDHN }}</p>
            
                                    <div>
                                        <label for="ngayNhap"><b>Ng√†y Nh·∫≠p H√†ng:</b></label>
                                        <input type="date" class="form-control" id="ngayNhap" 
                                               style="display: inline-block; width: auto; height:25px" 
                                               ng-model="selectedOrder.ngayNhap">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="tenNCC"><b>T√™n Nh√† Cung C·∫•p:</b></label>
                                    <input type="text" id="tenNCC" class="form-control" ng-model="selectedOrder.tenNCC" />
                                </div>
                                <!-- B·∫£ng chi ti·∫øt s·∫£n ph·∫©m -->
                                <h5 style="text-align: center; margin-top:10px;">Danh S√°ch S·∫£n Ph·∫©m</h5>
                                <table border="1">
                                    <thead>
                                        <tr>
                                            <th>M√£ s·∫£n ph·∫©m</th>
                                            <th>T√™n s·∫£n ph·∫©m</th>
                                            <th>Gi√° nh·∫≠p</th>
                                            <th>SL</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="ct in listChiTiet">
                                            <td><input type="text" class="form-control" ng-model="ct.maSp" /></td>
                                            <td><input type="text" class="form-control" ng-model="ct.tenSp" /></td>
                                            <td><input type="text" class="form-control form-control-sm" 
                                                    ng-model="ct.giaNhap"  ng-change="ct.giaNhap = parseCurrency(ct.giaNhap)" 
                                                    ng-blur="ct.giaNhap = parseCurrency(ct.giaNhap).toLocaleString('vi-VN')"  />
                                            </td>
                                            <td><input type="number" class="form-control" ng-model="ct.soLuong" /> </td>
                                            <td>
                                                <button class="btn btn-danger" ng-click="deleteChiTiet(ct)">
                                                    <img src="images/delete.png" alt="X√≥a" style="width: 15px; height:15px;"> 
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <!-- Th√™m s·∫£n ph·∫©m m·ªõi -->
                                <div class="form-inline" style="margin-top:10px;">
                                    <input type="text" class="form-control" placeholder="M√£ s·∫£n ph·∫©m" ng-model="newChiTiet.maSp" />
                                    <input type="text" class="form-control" placeholder="T√™n s·∫£n ph·∫©m" ng-model="newChiTiet.tenSp" />
                                    <input type="text" class="form-control" placeholder="Gi√° nh·∫≠p (12345)" 
                                        ng-model="newChiTiet.giaNhap" ng-change="newChiTiet.giaNhap = parseCurrency(newChiTiet.giaNhap)" 
                                        ng-blur="newChiTiet.giaNhap = parseCurrency(newChiTiet.giaNhap).toLocaleString('vi-VN')"  />
        
                                    <input type="number" class="form-control" placeholder="S·ªë l∆∞·ª£ng" ng-model="newChiTiet.soLuong" />
                                    <button class="btn btn-primary" style="background-color: transparent; border: none;" ng-click="addChiTiet()">‚úîÔ∏è</button>
                                </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button ng-click="saveOrder()" type="button" class="btn btn-primary">
                                    {{ isEditMode ? 'C·∫≠p nh·∫≠t' : 'Th√™m m·ªõi' }}
                                </button>
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <style>
                    table th, table td {
                        vertical-align: middle;
                    }
                    table th:nth-child(2), table td:nth-child(2) {
                        width: 38%; /* C·ªôt T√™n s·∫£n ph·∫©m to h∆°n */
                    }
                    table th:nth-child(4), table td:nth-child(4) {
                        width: 11%; /* C·ªôt S·ªë l∆∞·ª£ng nh·ªè l·∫°i */
                    }
                    .form-inline {
                    display: flex;
                    align-items: center;
                    gap: 15px; /* Kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn t·ª≠ */
                    }
                    .form-inline p {
                        margin: 0;
                    }
                    .form-inline input {
                        height: 30px; /* ƒêi·ªÅu ch·ªânh chi·ªÅu cao */
                    }
                    .modal-header > div {
                    display: flex;
                    justify-content: space-between; /* ƒê·∫©y hai ph·∫ßn t·ª≠ sang hai ph√≠a */
                    align-items: center; /* CƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
                    margin-bottom: 10px;
                    }
        
                    .modal-header > div p {
                        margin: 0;
                    }
        
                    .modal-header > div input {
                        height: 25px;
                        width: auto;
                        margin-left: 5px;
                    }
                </style>
        
        
                        
                </div>
                
                <!-- N·ªôi dung Tab Th√¥ng b√°o -->
                <div id="notifications" class="tab-content">
                <!-- <div id="tab-notifications" ng-show="activeTab === 'notifications'" class="tab-content"> -->
                    <h2>Th√¥ng b√°o c·ª≠a h√†ng</h2>
                    <p>Danh s√°ch th√¥ng b√°o.</p>
                </div>
            
                <!-- N·ªôi dung Tab C·ª≠a h√†ng -->
                <div id="store" class="tab-content">
                <!-- <div id="tab-store" ng-show="activeTab === 'store'" class="tab-content"> -->
                    <h2>T·∫•t c·∫£ c√°c c·ª≠a h√†ng</h2>
                    <p>Danh s√°ch c·ª≠a h√†ng ƒëang ho·∫°t ƒë·ªông.</p>
                </div>

                <!-- N·ªôi dung Tab Ng∆∞·ªùi d√πng -->
                <div id="user" class="tab-content" ng-controller="userCtrl" >
                    <div class="header">
                        <h3 style="display: inline-block;">Danh s√°ch Ng∆∞·ªùi d√πng</h3>
                        <!-- Thanh t√¨m ki·∫øm -->
                        <div class="search-container" >
                            <input type="text" ng-model="searchQuery.hoten" placeholder="üîç T√™n ng∆∞·ªùi d√πng..." class="form-control" style="width: 500px;">
                            <button ng-click="searchUsers()" class="btn btn-primary">T√¨m ki·∫øm</button>
                            <button id="loadUser" style="width:25px; height:25px; margin-top: 6px; margin-left: 20px; border: none; cursor: pointer; background: transparent;" ng-click="loadUsers()">
                                <img src="images/load.png" />
                            </button>
                        </div>
                        <button type="button" style="float:right; border:none;background-color: #FFF" data-bs-toggle="modal" data-bs-target="#userModal" ng-click="clearForm()">
                           <image class="add" src="images/addUser.png"/>
                        </button>
                    </div>    
        
                    <table class="product-table-user">
                        <thead>
                            <tr>
                                <th>PerID</th>
                                <th>T√†i kho·∫£n</th>
                                <th>H·ªç T√™n</th>
                                <th>ƒê·ªãa Ch·ªâ</th>
                                <th>Role</th>
                                <th>H√†nh ƒë·ªông</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="user in listUser">
                                <td>{{user.perID}}</td>
                                <td>{{user.taiKhoan}}</td>
                                <td>{{user.hoTen }}</td>
                                <td>{{user.diaChi}}</td>
                                <td>{{ user.role }}</td>
                                <td>
                                    <button class="edit-btn" ng-click="editUser(user)" data-bs-toggle="modal" data-bs-target="#userModal">S·ª≠a</button>
                                    <button class="delete-btn" ng-click="deleteUser(user.perID)">X√≥a</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
        
                    <lable style=" margin-top: 10px;"> {{ listUser.length }}<a> Ng∆∞·ªùi d√πng</a> </lable>
                    <!-- Ph√¢n trang -->
                    <div class="pagination">
                        <button ng-repeat="page in [].constructor(totalPages()) track by $index"
                                ng-class="{'active': currentPage === $index + 1}"
                                ng-click="setPage($index + 1)">
                            {{ $index + 1 }}
                        </button>
                    </div>
        
        
                    <!-- Modal Th√™m/S·ª≠a Ng∆∞·ªùi D√πng -->
                    <div class="modal fade modal-lg" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="userModalLabel">
                                        {{ isEditMode ? 'C·∫≠p nh·∫≠t Ng∆∞·ªùi D√πng' : 'Th√™m Ng∆∞·ªùi D√πng' }}
                                    </h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <form ng-submit="saveUser()" enctype="multipart/form-data">
                                        <div class="row mb-2">
                                            <div class="col-md-6">
                                                <label for="taikhoan">Email ho·∫∑c S·ªë ƒëi·ªán tho·∫°i:</label>
                                                <input ng-model="taikhoan" type="text" id="taikhoan" class="form-control" required>
                                            </div>
                                            <div class="col-md-6 position-relative ">
                                                <label for="matkhau">M·∫≠t kh·∫©u:</label>
                                                <input ng-model="matkhau" type="password" id="matkhau"  class="form-control pe-3" placeholder="" required>
                                                <button type="button" id="toggle-password" class="btn btn-sm position-absolute" 
                                                    style="top: 68%; right: 10px; transform: translateY(-50%); border: none; background: none;">
                                                    <img id="eye-icon" src="images/eye.png" alt="eye" style="width: 20px; height: 20px;">
                                                </button>
                                            </div>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-md-6">
                                                <label for="hoten">H·ªç t√™n:</label>
                                                <input ng-model="hoten" type="text" id="hoten" class="form-control">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="ngaysinh">Ng√†y sinh:</label>
                                                <input ng-model="ngaysinh" type="date" id="ngaysinh" class="form-control">
                                            </div>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-md-6">
                                                <label for="gioitinh">Gi·ªõi t√≠nh:</label>
                                                <select ng-model="gioitinh" id="gioitinh" class="form-control">
                                                    <option value="Nam">Nam</option>
                                                    <option value="N·ªØ">N·ªØ</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="diachi">ƒê·ªãa ch·ªâ:</label>
                                                <input ng-model="diachi" type="text" id="diachi" class="form-control">
                                            </div>
                                        </div>
                                        <div >
                                            <label for="role">Role:</label>
                                            <select class="role" ng-model="role" id="role" ng-options="role for role in ['Admin', 'Kh√°ch h√†ng']">
                                                <option value="user">Kh√°ch h√†ng</option>
                                                <option value="admin">Admin</option>
                                            </select>
                                        </div>
                                    </form> 
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                                    <button ng-click="saveUser()" type="button" class="btn btn-primary">
                                        {{ isEditMode ? 'C·∫≠p nh·∫≠t' : 'Th√™m m·ªõi' }}
                                    </button>
                                </div>
                            </div>
                        </div>           
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
